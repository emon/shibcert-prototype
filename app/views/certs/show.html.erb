<h3>証明書の詳細</h3>

<% if @cert %>
<table class="table">
  <tr>
	<td><strong>証明書タイプ</strong></td>
	<td>
	  <% if SHIBCERT_CONFIG['caption_j']['purpose_type'][@cert.purpose_type] %>
	  <%= SHIBCERT_CONFIG['caption_j']['purpose_type'][@cert.purpose_type] %>
	  <% else %>  
	  証明書タイプに問題が発生しています。担当部署までお問い合わせ下さい。
	  <% end %>
	</td>
  </tr>
  <tr>
	<td><strong>発行の状況</strong></td>
	<td>
	  <% if @cert.state == 0 %>
	  申請中です。
	  <% elsif @cert.state == nil or ー1 %>
	  申請・発行に問題が発生しています。担当部署までお問い合わせ下さい。
	  <% elsif @cert.state == 1 %>
	  発行完了済・有効です。
	  <% elsif @cert.state == 2 %>
	  発行完了済・期限切れのため無効です。
	  <% elsif @cert.state == 3 %>
	  発行完了済・利用者自身により無効化されました。
	  <% end %>
	</td>
  </tr>
  <tr>
	<td><strong>PIN番号</strong></td>
	<td>
	<% if @cert.pin %>
	<%= @cert.pin %>
	<% else %>
	まだPIN番号は発行されていません。申請完了メール送信までお待ちください。
	<% end %>
	</td>
  </tr>
  <tr>
	<td><strong>申請日時</strong></td>
	<td>
	  <% if @cert.created_at %>
	  <%= @cert.created_at %>
	  <% else %>
	  未発行
	  <% end %>
	</td>
  </tr>
  <tr>
	<td><strong>発行日時</strong></td>
	<td>
	  <% if @cert.pin %>
	  <%= @cert.pin %>
	  <% else %>
	  未発行
	  <% end %>
	</td>
  </tr>
  <tr>
	<td><strong>有効期限</strong></td>
	<td>
	  <% if @cert.pin %>
	  <%= @cert.pin %>
	  <% else %>
	  未発行
	  <% end %>
	</td>
  </tr>
  
  <tr>
	<td><strong>用途メモ</strong></td>
	<td>
	  <%= form_tag({controller: "certs", action: "edit_memo_remote", id: @cert.id, }, remote: true, class: "form-inline") do %>
	  <div class ="form-group">
		<%= text_field :cert, :memo, placeholder: "(例)iPhoneのメール暗号化用" %>
		<%= submit_tag "メモを保存", class:"btn btn-xs btn-default" %>
	  </div>
	  <% end %>
	</td>
  </tr>
</table>
<% else %>
<p> 指定された証明書が存在しません。何らかのエラーの可能性がありますので、管理担当者までご連絡下さい。</p>
<% end %>

<%= link_to 'ポータルのトップページに戻る', {controller: "portal", action: "index"} %>

